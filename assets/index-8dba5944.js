function tt(t,n,u,m=v=>v){return t*m(.5-n*(.5-u))}function pt(t){return[-t[0],-t[1]]}function g(t,n){return[t[0]+n[0],t[1]+n[1]]}function p(t,n){return[t[0]-n[0],t[1]-n[1]]}function a(t,n){return[t[0]*n,t[1]*n]}function at(t,n){return[t[0]/n,t[1]/n]}function D(t){return[t[1],-t[0]]}function nt(t,n){return t[0]*n[0]+t[1]*n[1]}function gt(t,n){return t[0]===n[0]&&t[1]===n[1]}function vt(t){return Math.hypot(t[0],t[1])}function dt(t){return t[0]*t[0]+t[1]*t[1]}function et(t,n){return dt(p(t,n))}function ut(t){return at(t,vt(t))}function mt(t,n){return Math.hypot(t[1]-n[1],t[0]-n[0])}function F(t,n,u){let m=Math.sin(u),v=Math.cos(u),S=t[0]-n[0],_=t[1]-n[1],r=S*v-_*m,f=S*m+_*v;return[r+n[0],f+n[1]]}function U(t,n,u){return g(t,a(p(n,t),u))}function rt(t,n,u){return g(t,a(n,u))}var{min:k,PI:Mt}=Math,it=.275,I=Mt+1e-4;function ot(t,n={}){let{size:u=16,smoothing:m=.5,thinning:v=.5,simulatePressure:S=!0,easing:_=e=>e,start:r={},end:f={},last:T=!1}=n,{cap:z=!0,easing:M=e=>e*(2-e)}=r,{cap:W=!0,easing:c=e=>--e*e*e+1}=f;if(t.length===0||u<=0)return[];let s=t[t.length-1].runningLength,d=r.taper===!1?0:r.taper===!0?Math.max(u,s):r.taper,O=f.taper===!1?0:f.taper===!0?Math.max(u,s):f.taper,V=Math.pow(u*m,2),A=[],j=[],E=t.slice(0,10).reduce((e,l)=>{let i=l.pressure;if(S){let o=k(1,l.distance/u),N=k(1,1-o);i=k(1,e+(N-e)*(o*it))}return(e+i)/2},t[0].pressure),h=tt(u,v,t[t.length-1].pressure,_),G,H=t[0].vector,q=t[0].point,Z=q,b=q,L=Z,J=!1;for(let e=0;e<t.length;e++){let{pressure:l}=t[e],{point:i,vector:o,distance:N,runningLength:w}=t[e];if(e<t.length-1&&s-w<3)continue;if(v){if(S){let P=k(1,N/u),R=k(1,1-P);l=k(1,E+(R-E)*(P*it))}h=tt(u,v,l,_)}else h=u/2;G===void 0&&(G=h);let ct=w<d?M(w/d):1,ht=s-w<O?c((s-w)/O):1;h=Math.max(.01,h*Math.min(ct,ht));let X=(e<t.length-1?t[e+1]:t[e]).vector,Q=e<t.length-1?nt(o,X):1,ft=nt(o,H)<0&&!J,Y=Q!==null&&Q<0;if(ft||Y){let P=a(D(H),h);for(let R=1/13,C=0;C<=1;C+=R)b=F(p(i,P),i,I*C),A.push(b),L=F(g(i,P),i,I*-C),j.push(L);q=b,Z=L,Y&&(J=!0);continue}if(J=!1,e===t.length-1){let P=a(D(o),h);A.push(p(i,P)),j.push(g(i,P));continue}let $=a(D(U(X,o,Q)),h);b=p(i,$),(e<=1||et(q,b)>V)&&(A.push(b),q=b),L=g(i,$),(e<=1||et(Z,L)>V)&&(j.push(L),Z=L),E=l,H=o}let y=t[0].point.slice(0,2),x=t.length>1?t[t.length-1].point.slice(0,2):g(t[0].point,[1,1]),K=[],B=[];if(t.length===1){if(!(d||O)||T){let e=rt(y,ut(D(p(y,x))),-(G||h)),l=[];for(let i=1/13,o=i;o<=1;o+=i)l.push(F(e,y,I*2*o));return l}}else{if(!(d||O&&t.length===1))if(z)for(let l=1/13,i=l;i<=1;i+=l){let o=F(j[0],y,I*i);K.push(o)}else{let l=p(A[0],j[0]),i=a(l,.5),o=a(l,.51);K.push(p(y,i),p(y,o),g(y,o),g(y,i))}let e=D(pt(t[t.length-1].vector));if(O||d&&t.length===1)B.push(x);else if(W){let l=rt(x,e,h);for(let i=1/29,o=i;o<1;o+=i)B.push(F(l,x,I*3*o))}else B.push(g(x,a(e,h)),g(x,a(e,h*.99)),p(x,a(e,h*.99)),p(x,a(e,h)))}return A.concat(B,j.reverse(),K)}function lt(t,n={}){var u;let{streamline:m=.5,size:v=16,last:S=!1}=n;if(t.length===0)return[];let _=.15+(1-m)*.85,r=Array.isArray(t[0])?t:t.map(({x:c,y:s,pressure:d=.5})=>[c,s,d]);if(r.length===2){let c=r[1];r=r.slice(0,-1);for(let s=1;s<5;s++)r.push(U(r[0],c,s/4))}r.length===1&&(r=[...r,[...g(r[0],[1,1]),...r[0].slice(2)]]);let f=[{point:[r[0][0],r[0][1]],pressure:r[0][2]>=0?r[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],T=!1,z=0,M=f[0],W=r.length-1;for(let c=1;c<r.length;c++){let s=S&&c===W?r[c].slice(0,2):U(M.point,r[c],_);if(gt(M.point,s))continue;let d=mt(s,M.point);if(z+=d,c<W&&!T){if(z<v)continue;T=!0}M={point:s,pressure:r[c][2]>=0?r[c][2]:.5,vector:ut(p(M.point,s)),distance:d,runningLength:z},f.push(M)}return f[0].vector=((u=f[1])==null?void 0:u.vector)||[0,0],f}function st(t,n={}){return ot(lt(t,n),n)}var yt=st;const xt=Object.freeze(Object.defineProperty({__proto__:null,default:yt,getStroke:st,getStrokeOutlinePoints:ot,getStrokePoints:lt},Symbol.toStringTag,{value:"Module"}));export{xt as P,st as a};
